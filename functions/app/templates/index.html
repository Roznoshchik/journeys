{% extends 'base.html' %}
{% block styles %}
<style>
    html {
        height: 100%;
        * {
            box-sizing: border-box;
        }
    }

    body {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
        height: 100%;
    }

    .main {
        white-space: pre;
        background-color: bisque;
        padding: 32px 64px;
        height: 100%;
        min-height: 100%;
        flex-grow: 1;

    }
    .sidebar {
        width: 450px;
    }

    .locations {
        max-height: 80vh; /* This is very wip will have better solution */
        overflow-x: scroll;

    }

    .location {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-bottom: 16px;
        max-width: 450px;
        background-color: #efefef;
        border-radius: 24px;
        padding: 24px 48px;

        .form-item {
            display: flex;
            flex-direction: column;

        }
    }
</style>
{% endblock %}
{% block body %}
<div class="sidebar">
    <div class="locations">
        <div class="location">
            <div class="form-item">
                <label for="address">Address</label>
                <input type="search" name="address">
            </div>
            <div class="form-item">
                <label for="date-arrived">Date Arrived</label>
                <input type="date" name="date-arrived">
            </div>
            <div class="form-item">
                <label for="date-left">Date Left</label>
                <input type="date" name="date-left">
            </div>
        </div>
    </div>
    <div class="actions">
        <button class="add">Add another location</button>
        <button class="submit">Submit</button>
    </div>
</div>
<div class="main"></div>

{% endblock %}

{% block scripts %}
<script>
    const locations = document.querySelector('.locations');
    const add = document.querySelector('.add');
    const submit = document.querySelector('.submit');
    const main = document.querySelector('.main');

    submit.onclick = () => {
        const results = []
        for (let location of locations.querySelectorAll('.location')) {
            results.push({
                address: location.querySelector('input[name=address]').value,
                dateArrived: location.querySelector('input[name=date-arrived]').value,
                dateLeft: location.querySelector('input[name=date-left]').value
            })
        };
        main.innerText = JSON.stringify(results, null, 4);
    }

    add.onclick = () => {
        const location = document.createElement('div');
        location.classList.add('location');
        location.innerHTML = `<div class="form-item">
            <label for="address">Address</label>
            <input type="search" name="address">
        </div>
        <div class="form-item">
            <label for="date-arrived">Date Arrived</label>
            <input type="date" name="date-arrived">
        </div>
        <div class="form-item">
            <label for="date-left">Date Left</label>
            <input type="date" name="date-left">
        </div>`
        locations.append(location);
    }

</script>
{% endblock %}
